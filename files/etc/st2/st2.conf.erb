# System-wide configuration
<%- api_url = env_st2_api_url || 'http://localhost:9101' -%>
<%- conf_root = env_st2_conf_root || '/etc' -%>
<%- debug = env_st2_debug || 'False' -%>

[api]
# Host and port to bind the API server.
host = 0.0.0.0
port = 9101
logging = <%= conf_root %>/st2api/conf/console.conf
# allow_origin is required for handling CORS in st2 web UI.
# allow_origin = http://myhost1.example.com:3000,http://myhost2.example.com:3000
allow_origin = <%= env_st2_api_allow_origin || '*' %>

[sensorcontainer]
logging = <%= conf_root %>/st2reactor/conf/console.conf

[rulesengine]
logging = <%= conf_root %>/st2reactor/conf/console.conf

[actionrunner]
logging = <%= conf_root %>/st2actions/conf/console.conf

[auth]
host = 0.0.0.0
port = 9100
use_ssl = False
debug = <%= debug.include?('rue') ? 'True' : debug %>
enable = False
logging = <%= conf_root %>/st2api/conf/console.conf

mode = standalone

# Note: Settings bellow are only used in "standalone" mode
backend = flat_file
backend_kwargs ={"file_path": "<%= conf_root %>/st2/htpasswd"}

# Base URL to the API endpoint excluding the version (e.g. http://myhost.net:9101/)
api_url =<%= api_url %>

[system]
base_path = /opt/stackstorm

[syslog]
host = <%= env_st2_syslog_host || 'localhost' %>
port = <%= env_st2_syslog_port || 514 %>
facility = <%= env_st2_syslog_facility || 'local7' %>
protocol = <%= env_st2_syslog_protocol || 'udp' %>

[log]
excludes = requests,paramiko
redirect_stderr = False

[system_user]
user = <%= env_st2_system_user || 'stanley' %>
ssh_key_file = <%= env_st2_ssh_key_file || '/home/stanley/.ssh/st2_stanley_key' %>

[messaging]
url = <%= env_st2_messaging_url || 'amqp://guest:guest@localhost:5672/' %>

[ssh_runner]
remote_dir = /tmp

[st2_webhook_sensor]
host = 0.0.0.0
port = 6000
url = /webhooks/st2/

[generic_webhook_sensor]
host = 0.0.0.0
port = 6001
url = /webhooks/generic/

[action_sensor]
triggers_base_url = <%= api_url %>/v1/triggertypes/

[resultstracker]
logging = <%= conf_root %>/st2actions/conf/console.conf

[notifier]
logging = <%= conf_root %>/st2actions/conf/console.conf
